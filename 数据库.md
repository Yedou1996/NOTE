## 2019.8.18

```
	基础查询

SELECT xq FROM t_cxfz          						/*查询单个字段*/

SELECT xq,zm FROM t_cxfz        					/*查询多个字段*/
 
SELECT * FROM t_cxfz            					/*查询所有字段*/

SELECT 52  FROM t_cxfz             					 /*查询常量值*/        

SELECT '抢劫罪' FROM t_cxfz						  /*查询常量值*/ 

SELECT 100%98										/*查询表达式*/

SELECT VERSION()                   					 /*查询函数*/

SELECT xq AS 刑期,zm AS 罪名 FROM t_cxfz          		/*起别名*/

SELECT xq 刑期,zm 罪名 FROM t_cxfz               		/*起别名简写*/

SELECT xq AS "out put" FROM t_cxfz                		/*有特殊符号时起别名*/

SELECT DISTINCT nl FROM t_cxfz						   /*查询所有的年龄，去重*/

SELECT concat(nl,',',xq,zm) AS 刑期罪名 FROM t_cxfz        /*多字段拼接*/


	条件查询
	
SELECT * FROM t_cxfz WHERE nl>60           /*查询年龄大于60的*/

SELECT xl AS 学历,nl AS 年龄 FROM t_cxfz WHERE nl !=60      /*查询学历和年龄不等于60的*/

SELECT xl AS 学历,nl As 年龄,lgf AS 劳改犯 FROM t_cxfz WHERE nl>30 AND nl <40     /*查询年龄大于30小于40的*/

SELECT xl,nl,lgf FROM t_cxfz WHERE  NOT(nl>40 OR nl<30) OR nl =45                /*查询年龄不在40和30岁之间或者等于45的人*/



	模糊查询
	
SELECT * FROM t_cxfz WHERE xq like '%十年%'                  /*查询字段中包含某个关键字*/

SELECT xl,nl,lgf FROM t_cxfz WHERE xl IN('小学教育','半文盲')   /*查询某个字段内有相关关键字的*/


SELECT xl,nl,lgf FROM t_cxfz WHERE lgf is null                   /*查询某个字段为空的内容*/

SELECT * FROM t_cxfz WHERE lgf is not NULL                       /*查询某个字段不为空的*

select ID,POLICE_NO FROM gate_inner_staff where POLICE_NO like 'A10___'   /*模糊查询下划线代表模糊*/

select IFNULL(CREATE_BY,55) from gate_inner_staff                 如果为空就替换

% 任意多个字符     _任意单个字符 


	

SELECT DISTINCT
	c_code,c_name 
FROM
	db_zf.t_zfjbxx AS zf
	LEFT JOIN PUBLIC.t_aty_code AS code1 ON zf.c_mz = code1.c_code
	
	
	
	SELECT
 c_zfbh,
 code1.c_name AS mz,
 code2.c_name AS zzmm,
 code3.c_name AS fgdj,
 code4.c_name AS bqxl,
 code5.c_name AS xb,
 code6.c_name AS zybs,
 c_bmbh,
 c_bmmc 
FROM
 db_zf.t_zfjbxx AS zf
 LEFT JOIN PUBLIC.t_aty_code AS code1 ON zf.c_mz = code1.c_code 
 AND code1.c_pid = '10000002' --民族
 LEFT JOIN PUBLIC.t_aty_code AS code2 ON zf.c_bqzzmm = code2.c_code 
 AND code2.c_pid = '10000023' --政治面貌
 LEFT JOIN PUBLIC.t_aty_code AS code3 ON zf.c_fgdj = code3.c_code 
 AND code3.c_pid = '10000006' --分管等级
 LEFT JOIN PUBLIC.t_aty_code AS code4 ON zf.c_bqxl = code4.c_code 
 AND code4.c_pid = '10000024' --学历
 LEFT JOIN PUBLIC.t_aty_code AS code5 ON zf.c_xb = code5.c_code 
 AND code5.c_pid = '10000001' --性别
 LEFT JOIN PUBLIC.t_aty_code AS code6 ON zf.c_zybz = code6.c_code 
 AND code6.c_pid = '10000008' --在押标识

```

## 	2019.8.18

```
	排序查询
	
	
select * from db_test.t_cxfz order by nl asc         			  顺序查询         

select * from db_test.t_cxfz ORDER BY nl desc					 倒序查询

select * from db_test.t_cxfz where nl>40 order by nl asc           升序查询年龄大于40的罪犯

SELECT * from db_test.t_cxfz order by length(xq)                   按字符长度排序

select * from db_test.t_cxfz order by nl asc, nf desc;             按年龄排序完再按年份排

select nl,xl from db_test.t_cxfz WHERE nl>=30 and nl<=40 ORDER BY nl        查询年龄在30和40岁之间按年龄排序

select * from db_test.t_cxfz where xl like '%小学%' order by nl         查询学历中包含‘小学’的并按年龄排序


	常见函数
一、字符函数
	select length('jeff')                               长度函数                   
	select concat(nl,'zm',zm) from db_test.t_cxfz       拼接函数
	select upper('lxl')								 小写转大写
	select lower('LXL')								 大写转小写
	select substr('我最喜欢吃东西了',5)                  截取函数         
	select substr('我最喜欢吃东西了',1,4)			    截取函数
	select instr('我最炫吃东西了','东西') as output      返回子串出现的索引
	select trim('         loubaba        ')            去除前后的内容
	select trim ('baba' from  'bababababababaLXLbababababbaba')    去除前后相同的重复内容
	select LPAD('娄爸爸',10,'*')                      用指定的字符实现左填充指定长度
	select RPAD('娄爸爸',10,'*')                      用指定的字符实现右填充指定长度
	select replace('娄爸爸喜欢玩游戏','玩游戏','吃东西')		替换
	



```

## 2019.8.23

```
	数学函数
select round(1.5)          						 四舍五入

select round(1.234,2)        					 小数点后保留几位

select ceil(1.45)          						 向上取整

select floor(-9.99)     						 向下取整

select truncate(1.69999,1)       				  截断

select mod(10,3)								 取余

round


	日期函数
select now()                   返回当前的时间+日期

select curdate()               返回当前的日期不包含时间

select curtime()			  返回当前的时间，不包含日期

select year(now())              返回年

select year('1997-7-8')       	返回年	

SELECT monthname(now())         返回月的英文名


	流程控制函数if，case
select ext1,if(ext1 is null,'6666','777') from gate_foreign_car_collect
   相当于三元表达式
   
   相当于switch ， case。。
  select nl as 年龄,case nl 
 when 20 then nl+20
 when 30 then nl+20
 when 60 then nl+20
 else nl
 end as 新年龄
 from db_test.t_cxfz
 
 select nl,
 case
 when nl>60 then '年轻'
 when nl>40 then  '一般般'
 when nl>20 then '老了'
 else 'hahah'
 end as 哈哈
 from db_test.t_cxfz
 
  
```

## 2018.8.26

```
	分组函数
 select count(nl),sum(nl),round(avg(nl),2),min(nl),max(nl)from t_cxfz  求和，计数
 
  select count(zm),count(nl),count(*) from db_test.t_cxfz     count(*)统计行数
  
  select count(*) from db_test.t_cxfz where nl >60     		统计年龄大于60的个数
  
  select max(nl),zm  FROM db_test.t_cxfz GROUP BY zm       查询每个罪名的最大年龄
   
  select count(*),zm from db_test.t_cxfz GROUP BY zm       查询每个罪名的人数
    
 select ceil(avg(nl)),zm from db_test.t_cxfz where xl like '%小%' group by zm
 
  select count(*),zm from db_test.t_cxfz GROUP BY zm HAVING count(*)>2   查询罪名人数大于2的
  
   select ceil(avg(nl)),zm from db_test.t_cxfz WHERE zm is not null GROUP BY zm HAVING avg(nl)>40    查询每个平均年龄>40罪名不为空的罪犯
   分组函数做条件肯定放在having语句中
   
```

## 2018.8.27

### 	连接查询（多表查询）

```
		等值连接：
	多表等值连接的结果为多表的交集部分
	多表的顺序没有要求
	一般需要为表取别名
select name,boyname from boys,beauty where beauty.boyfriend_id=boys.id   id关联
	
		非等值连接：
select salary,grade_level from employees e,job_grades g where salary between g.lowest_sal and g.highest_sal             比较两个字段给出等级。

		自连接：
select e.employee_id,e.last_name,m.employee_id,m.lastname from employees e,employees m where e.manager_id=emplorees_id;    同一个表内的不同字段
	 
78
```



